<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');.lst-kix_9s4b1vf9pkzs-7>li:before{content:"\0025cb  "}.lst-kix_9s4b1vf9pkzs-8>li:before{content:"\0025a0  "}.lst-kix_cmzrwo50c304-5>li{counter-increment:lst-ctn-kix_cmzrwo50c304-5}.lst-kix_bdvaausjkn7q-7>li:before{content:"\0025cb  "}.lst-kix_bdvaausjkn7q-8>li:before{content:"\0025a0  "}.lst-kix_wojgfyx21sbu-0>li:before{content:"-  "}.lst-kix_cmzrwo50c304-4>li{counter-increment:lst-ctn-kix_cmzrwo50c304-4}.lst-kix_wojgfyx21sbu-3>li:before{content:"-  "}ul.lst-kix_s1sx882nqkje-0{list-style-type:none}.lst-kix_cmzrwo50c304-7>li{counter-increment:lst-ctn-kix_cmzrwo50c304-7}.lst-kix_wojgfyx21sbu-5>li:before{content:"-  "}.lst-kix_cmzrwo50c304-6>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-6,decimal) ". "}ul.lst-kix_s1sx882nqkje-2{list-style-type:none}ul.lst-kix_s1sx882nqkje-1{list-style-type:none}ul.lst-kix_s1sx882nqkje-4{list-style-type:none}ol.lst-kix_cmzrwo50c304-6.start{counter-reset:lst-ctn-kix_cmzrwo50c304-6 0}.lst-kix_8i3sfdutmf0u-3>li:before{content:"\0025cf  "}.lst-kix_wojgfyx21sbu-4>li:before{content:"-  "}ul.lst-kix_s1sx882nqkje-3{list-style-type:none}.lst-kix_cmzrwo50c304-5>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-5,lower-roman) ". "}.lst-kix_bdvaausjkn7q-1>li:before{content:"\0025cb  "}ul.lst-kix_s1sx882nqkje-6{list-style-type:none}.lst-kix_9s4b1vf9pkzs-0>li:before{content:"\0025cf  "}ul.lst-kix_s1sx882nqkje-5{list-style-type:none}.lst-kix_wojgfyx21sbu-1>li:before{content:"-  "}ul.lst-kix_s1sx882nqkje-8{list-style-type:none}.lst-kix_8i3sfdutmf0u-2>li:before{content:"\0025a0  "}ul.lst-kix_s1sx882nqkje-7{list-style-type:none}.lst-kix_cmzrwo50c304-2>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-2,lower-roman) ". "}.lst-kix_cmzrwo50c304-4>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-4,lower-latin) ". "}.lst-kix_wojgfyx21sbu-2>li:before{content:"-  "}.lst-kix_bdvaausjkn7q-0>li:before{content:"\0025cf  "}.lst-kix_8i3sfdutmf0u-1>li:before{content:"\0025cb  "}.lst-kix_cmzrwo50c304-3>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-3,decimal) ". "}.lst-kix_bdvaausjkn7q-5>li:before{content:"\0025a0  "}.lst-kix_9s4b1vf9pkzs-3>li:before{content:"\0025cf  "}.lst-kix_9s4b1vf9pkzs-4>li:before{content:"\0025cb  "}ol.lst-kix_cmzrwo50c304-8{list-style-type:none}ol.lst-kix_cmzrwo50c304-7{list-style-type:none}.lst-kix_8i3sfdutmf0u-0>li:before{content:"\0025cf  "}.lst-kix_s1sx882nqkje-1>li:before{content:"\0025cb  "}.lst-kix_cmzrwo50c304-0>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-0,decimal) ". "}ol.lst-kix_cmzrwo50c304-6{list-style-type:none}.lst-kix_9s4b1vf9pkzs-1>li:before{content:"\0025cb  "}.lst-kix_9s4b1vf9pkzs-2>li:before{content:"\0025a0  "}.lst-kix_9s4b1vf9pkzs-5>li:before{content:"\0025a0  "}.lst-kix_9s4b1vf9pkzs-6>li:before{content:"\0025cf  "}.lst-kix_bdvaausjkn7q-2>li:before{content:"\0025a0  "}.lst-kix_bdvaausjkn7q-6>li:before{content:"\0025cf  "}.lst-kix_wojgfyx21sbu-8>li:before{content:"-  "}.lst-kix_s1sx882nqkje-0>li:before{content:"\0025cf  "}.lst-kix_s1sx882nqkje-4>li:before{content:"\0025cb  "}.lst-kix_cmzrwo50c304-1>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-1,lower-latin) ". "}ol.lst-kix_cmzrwo50c304-1{list-style-type:none}ol.lst-kix_cmzrwo50c304-0{list-style-type:none}.lst-kix_wojgfyx21sbu-7>li:before{content:"-  "}.lst-kix_s1sx882nqkje-3>li:before{content:"\0025cf  "}.lst-kix_bdvaausjkn7q-3>li:before{content:"\0025cf  "}ol.lst-kix_cmzrwo50c304-5{list-style-type:none}ol.lst-kix_cmzrwo50c304-4{list-style-type:none}.lst-kix_bdvaausjkn7q-4>li:before{content:"\0025cb  "}ol.lst-kix_cmzrwo50c304-3{list-style-type:none}.lst-kix_wojgfyx21sbu-6>li:before{content:"-  "}.lst-kix_s1sx882nqkje-2>li:before{content:"\0025a0  "}ol.lst-kix_cmzrwo50c304-2{list-style-type:none}.lst-kix_cmzrwo50c304-2>li{counter-increment:lst-ctn-kix_cmzrwo50c304-2}ul.lst-kix_7w7aear9n6i1-4{list-style-type:none}ul.lst-kix_7w7aear9n6i1-5{list-style-type:none}ol.lst-kix_cmzrwo50c304-3.start{counter-reset:lst-ctn-kix_cmzrwo50c304-3 0}ul.lst-kix_7w7aear9n6i1-6{list-style-type:none}ul.lst-kix_7w7aear9n6i1-7{list-style-type:none}ul.lst-kix_7w7aear9n6i1-8{list-style-type:none}.lst-kix_cmzrwo50c304-8>li{counter-increment:lst-ctn-kix_cmzrwo50c304-8}.lst-kix_7af67qqo4dei-7>li:before{content:"\0025cb  "}.lst-kix_7af67qqo4dei-6>li:before{content:"\0025cf  "}.lst-kix_7af67qqo4dei-3>li:before{content:"\0025cf  "}ul.lst-kix_7w7aear9n6i1-0{list-style-type:none}.lst-kix_7af67qqo4dei-5>li:before{content:"\0025a0  "}ul.lst-kix_7w7aear9n6i1-1{list-style-type:none}ul.lst-kix_7w7aear9n6i1-2{list-style-type:none}.lst-kix_7af67qqo4dei-4>li:before{content:"\0025cb  "}ul.lst-kix_7w7aear9n6i1-3{list-style-type:none}ol.lst-kix_cmzrwo50c304-4.start{counter-reset:lst-ctn-kix_cmzrwo50c304-4 0}.lst-kix_7af67qqo4dei-2>li:before{content:"\0025a0  "}.lst-kix_7af67qqo4dei-1>li:before{content:"\0025cb  "}.lst-kix_7af67qqo4dei-0>li:before{content:"\0025cf  "}ul.lst-kix_wojgfyx21sbu-5{list-style-type:none}ul.lst-kix_wojgfyx21sbu-4{list-style-type:none}ul.lst-kix_wojgfyx21sbu-3{list-style-type:none}ul.lst-kix_wojgfyx21sbu-2{list-style-type:none}ul.lst-kix_wojgfyx21sbu-8{list-style-type:none}ul.lst-kix_wojgfyx21sbu-7{list-style-type:none}ul.lst-kix_wojgfyx21sbu-6{list-style-type:none}.lst-kix_cmzrwo50c304-0>li{counter-increment:lst-ctn-kix_cmzrwo50c304-0}ul.lst-kix_wojgfyx21sbu-1{list-style-type:none}ul.lst-kix_wojgfyx21sbu-0{list-style-type:none}ol.lst-kix_cmzrwo50c304-5.start{counter-reset:lst-ctn-kix_cmzrwo50c304-5 0}ol.lst-kix_cmzrwo50c304-8.start{counter-reset:lst-ctn-kix_cmzrwo50c304-8 0}.lst-kix_7af67qqo4dei-8>li:before{content:"\0025a0  "}ul.lst-kix_8i3sfdutmf0u-7{list-style-type:none}ul.lst-kix_bdvaausjkn7q-1{list-style-type:none}ul.lst-kix_8i3sfdutmf0u-8{list-style-type:none}ul.lst-kix_bdvaausjkn7q-0{list-style-type:none}ul.lst-kix_8i3sfdutmf0u-5{list-style-type:none}ul.lst-kix_bdvaausjkn7q-3{list-style-type:none}.lst-kix_cmzrwo50c304-1>li{counter-increment:lst-ctn-kix_cmzrwo50c304-1}ul.lst-kix_8i3sfdutmf0u-6{list-style-type:none}ul.lst-kix_bdvaausjkn7q-2{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-0{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-1{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-2{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-3{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-4{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-5{list-style-type:none}ul.lst-kix_bdvaausjkn7q-8{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-6{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-7{list-style-type:none}ul.lst-kix_9s4b1vf9pkzs-8{list-style-type:none}ul.lst-kix_bdvaausjkn7q-5{list-style-type:none}ul.lst-kix_bdvaausjkn7q-4{list-style-type:none}ul.lst-kix_bdvaausjkn7q-7{list-style-type:none}ul.lst-kix_bdvaausjkn7q-6{list-style-type:none}ul.lst-kix_8i3sfdutmf0u-0{list-style-type:none}ol.lst-kix_cmzrwo50c304-2.start{counter-reset:lst-ctn-kix_cmzrwo50c304-2 0}ul.lst-kix_8i3sfdutmf0u-3{list-style-type:none}ul.lst-kix_8i3sfdutmf0u-4{list-style-type:none}ul.lst-kix_8i3sfdutmf0u-1{list-style-type:none}ul.lst-kix_8i3sfdutmf0u-2{list-style-type:none}.lst-kix_s1sx882nqkje-7>li:before{content:"\0025cb  "}ol.lst-kix_cmzrwo50c304-0.start{counter-reset:lst-ctn-kix_cmzrwo50c304-0 0}.lst-kix_s1sx882nqkje-8>li:before{content:"\0025a0  "}.lst-kix_s1sx882nqkje-5>li:before{content:"\0025a0  "}.lst-kix_s1sx882nqkje-6>li:before{content:"\0025cf  "}.lst-kix_7w7aear9n6i1-5>li:before{content:"\0025a0  "}.lst-kix_7w7aear9n6i1-6>li:before{content:"\0025cf  "}.lst-kix_8i3sfdutmf0u-4>li:before{content:"\0025cb  "}.lst-kix_7w7aear9n6i1-7>li:before{content:"\0025cb  "}.lst-kix_7w7aear9n6i1-8>li:before{content:"\0025a0  "}.lst-kix_8i3sfdutmf0u-5>li:before{content:"\0025a0  "}.lst-kix_cmzrwo50c304-7>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-7,lower-latin) ". "}.lst-kix_8i3sfdutmf0u-6>li:before{content:"\0025cf  "}.lst-kix_8i3sfdutmf0u-8>li:before{content:"\0025a0  "}.lst-kix_cmzrwo50c304-8>li:before{content:"" counter(lst-ctn-kix_cmzrwo50c304-8,lower-roman) ". "}.lst-kix_8i3sfdutmf0u-7>li:before{content:"\0025cb  "}.lst-kix_7w7aear9n6i1-3>li:before{content:"\0025cf  "}ol.lst-kix_cmzrwo50c304-1.start{counter-reset:lst-ctn-kix_cmzrwo50c304-1 0}.lst-kix_7w7aear9n6i1-4>li:before{content:"\0025cb  "}ul.lst-kix_7af67qqo4dei-2{list-style-type:none}ul.lst-kix_7af67qqo4dei-1{list-style-type:none}.lst-kix_7w7aear9n6i1-2>li:before{content:"\0025a0  "}ul.lst-kix_7af67qqo4dei-0{list-style-type:none}.lst-kix_7w7aear9n6i1-1>li:before{content:"\0025cb  "}ul.lst-kix_7af67qqo4dei-6{list-style-type:none}ul.lst-kix_7af67qqo4dei-5{list-style-type:none}.lst-kix_cmzrwo50c304-3>li{counter-increment:lst-ctn-kix_cmzrwo50c304-3}ul.lst-kix_7af67qqo4dei-4{list-style-type:none}ul.lst-kix_7af67qqo4dei-3{list-style-type:none}.lst-kix_cmzrwo50c304-6>li{counter-increment:lst-ctn-kix_cmzrwo50c304-6}ol.lst-kix_cmzrwo50c304-7.start{counter-reset:lst-ctn-kix_cmzrwo50c304-7 0}.lst-kix_7w7aear9n6i1-0>li:before{content:"\0025cf  "}ul.lst-kix_7af67qqo4dei-8{list-style-type:none}ul.lst-kix_7af67qqo4dei-7{list-style-type:none}ol{margin:0;padding:0}.c12{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:156pt;border-top-color:#000000;border-bottom-style:solid}.c17{color:#000000;font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c29{font-weight:normal;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c8{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left;direction:ltr}.c4{page-break-after:avoid;orphans:2;widows:2;direction:ltr}.c30{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c3{orphans:2;widows:2;text-align:justify;direction:ltr}.c32{background-color:#ffffff;font-size:12pt;color:#333333}.c1{font-size:9pt;font-family:"Consolas";color:#666600}.c25{border-collapse:collapse;margin-right:auto}.c6{orphans:2;widows:2;direction:ltr}.c24{background-color:#ffffff;font-size:10.5pt;color:#212121}.c33{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c0{font-size:9pt;font-family:"Consolas";color:#000000}.c2{font-size:9pt;font-family:"Consolas"}.c19{padding:0;margin:0}.c34{color:#000000;font-size:11pt}.c18{margin-left:72pt;padding-left:0pt}.c16{color:inherit;text-decoration:inherit}.c26{margin-left:108pt;text-indent:36pt}.c10{margin-left:36pt;padding-left:0pt}.c23{color:#1155cc;text-decoration:underline}.c11{color:#008800}.c20{font-weight:bold}.c13{color:#000088}.c27{text-indent:36pt}.c21{margin-left:36pt}.c9{height:11pt}.c28{text-align:center}.c5{height:0pt}.c15{color:#660066}.c31{text-align:justify}.c22{font-style:italic}.c14{color:#006666}.c7{color:#880000}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c33"><p class="c6"><span>This document reports information about the Spatial Computing Server design, interface and development.</span></p><h2 class="c4"><a name="h.9auuv6zqyd2"></a><span>System logic architecture </span></h2><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 268.00px;"><img alt="" src="images/image05.png" style="width: 624.00px; height: 268.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span>The image show the topsight view of the system. The Spatial Computing Server is the subsystem that mediates interaction between the devices and its details are specified next.</span></p><h1 class="c4"><a name="h.ap16xjpoef93"></a><span>Design</span></h1><p class="c3"><span>The system we want to build is a key component for the spatial computing system, its task is to mediate interactions between neighbours and maintain a consistent representation of the network of devices. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 409.33px;"><img alt="" src="images/image02.png" style="width: 624.00px; height: 409.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c9"><span></span></p><p class="c3"><span>As shown in the picture, this system is made up of three exential logical parts. </span></p><p class="c3"><span>The </span><span class="c20">connector</span><span>, is the component of the system that enables network communications between server and devices. </span></p><p class="c3"><span>A </span><span class="c20">resource</span><span>&nbsp;is an object with a type, associated data, relationships to other resources, and a set of methods that operate on it. It models an important concept of the system that can be accessed remotely with standard methods like HTTP GET, POST and PUT.</span></p><p class="c3"><span>The </span><span class="c20">model</span><span>&nbsp;must support a consistent representation of the device network and enables spatial query to be made considering the position of each node. Given the nature of the system, further consideration must be made on the model; data must be fresh and an outdated information must expire after a given time, querying the model should be fast and thread safe and must perform well even with large quantity of data.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span>In sight of simplicity and the fact that the server should be able to manage as much as requests as possible we decided to build a system that is based on the ReST model.</span></p><p class="c3"><span>Using ReST architecture means using a simple client-server request/response protocol for communication, moreover it enables the designer to think about the concept of resource and its representation. Next we define what resources are made of and how they behave in relation to HTTP methods GET, PUT, POST, etc.</span></p><h2 class="c4"><a name="h.si5fn64c56yu"></a><span>Interface</span></h2><p class="c6"><span>BASE_URL = &ldquo;http://[IP]:[PORT]/</span></p><h3 class="c4"><a name="h.2ftbtj5ofbtx"></a><span>Resources</span></h3><p class="c6"><span>Name: </span><span class="c20">Network / Model</span></p><p class="c6"><span>Description: </span><span class="c22">It&rsquo;s the isolated model of space for an application.</span></p><p class="c6"><span>URI: BASE_URL + &ldquo;{ModelId}/&rdquo;</span></p><p class="c6"><span class="c20">GET</span><span>: Returns information on the spatial network.</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Response:</span></p><p class="c6"><span class="c0">{</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodes_number</span><span class="c1">:</span><span class="c2 c14">999,</span></p><p class="c6"><span class="c1">&hellip;</span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">//TODO still to implement and define.</span></p><p class="c6"><span class="c0">}</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>If media-type is specified to be html, a webpage could be returned with a graphical and interactive representation of the network.</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Name: </span><span class="c20">Nodes</span></p><p class="c6"><span>Description: </span><span class="c22">It&rsquo;s the list of nodes in the network</span></p><p class="c6"><span>URI: BASE_URL + &ldquo;{ModelId}/nodes/&rdquo;</span></p><p class="c6"><span class="c20">GET</span><span>: Returns the list of nodes</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Response:</span></p><p class="c6"><span class="c0">[</span></p><p class="c6"><span class="c0">&nbsp; {</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;id&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;nodeid&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;state&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;position&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;positionType&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;Lat/Lon&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;lat&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">44.13756,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;lon&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">12.24132</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c1">},</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;values&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">null,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;sensors&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">null</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c6"><span class="c0">&nbsp; </span><span class="c1">},</span></p><p class="c6"><span class="c1">...</span></p><p class="c6"><span class="c0">]</span></p><p class="c6 c9"><span></span></p><p class="c6"><span class="c20">POST</span><span>: Creates a new node in the network</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Request:</span></p><p class="c6"><span class="c0">{</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c1">{</span><span class="c0">&nbsp;</span><span class="c1">&hellip;</span><span class="c0">&nbsp;</span><span class="c1">}</span><span class="c0">&nbsp;</span><span class="c2 c7">//State of the node</span></p><p class="c6"><span class="c0">}</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Response</span></p><p class="c6"><span class="c0">{</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success</span><span class="c1">:</span><span class="c2 c13">true,</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message</span><span class="c1">:&quot;&quot;,</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span><span class="c1">:{</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodeId</span><span class="c1">:&quot;</span><span class="c2 c15">NodeId&quot;</span></p><p class="c6 c27"><span class="c0">}</span></p><p class="c6"><span class="c0">}</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Name: </span><span class="c20">Node</span></p><p class="c6"><span>Description: </span><span class="c22">It&rsquo;s one specific node in the network</span></p><p class="c6"><span>URI: BASE_URL + &ldquo;{ModelId}/nodes/{NodeId}&rdquo;</span></p><p class="c6"><span class="c20">GET</span><span>: Returns information on the node</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Response:</span></p><p class="c6"><span class="c0">{</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id</span><span class="c1">:&quot;{</span><span class="c2 c15">NodeId</span><span class="c1">}&quot;</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state</span><span class="c1">:{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;position</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;positionType</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;Lat/Lon&quot;</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c7">//Fixed in every positionType</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lat</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">0.0,</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lon</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">0.0,</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alt</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">0.0</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">},</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values</span><span class="c1">:</span><span class="c0">&nbsp;[</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;density</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;&quot;,</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dispersion</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;&quot;</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sensors</span><span class="c1">:</span><span class="c0">&nbsp;[</span></p><p class="c6 c26"><span class="c0">{</span></p><p class="c6 c26"><span class="c2 c11">&quot;value&quot;</span><span class="c1">:</span><span class="c2 c11">&quot;14&quot;,</span></p><p class="c6 c26"><span class="c2 c11">&quot;type&quot;</span><span class="c1">:</span><span class="c2 c11">&quot;mock&quot;,</span></p><p class="c6 c26"><span class="c2 c11">&quot;sensorId&quot;</span><span class="c1">:</span><span class="c2 c11">&quot;mock1&quot;</span></p><p class="c6 c26"><span class="c0">}</span></p><p class="c6 c21"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span></p><p class="c6 c27"><span class="c0">}</span></p><p class="c6"><span class="c0">}</span></p><p class="c6 c9"><span></span></p><p class="c6"><span class="c20">PUT</span><span>: Updates or adds the informations on that node in the network</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Request:</span></p><ul class="c19 lst-kix_wojgfyx21sbu-0 start"><li class="c6 c10"><span class="c22">same as above</span></li></ul><p class="c6 c9"><span></span></p><p class="c6"><span>Response:</span></p><p class="c6"><span class="c0">{</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">true,</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message</span><span class="c1">:&quot;&quot;</span></p><p class="c6 c27"><span class="c0">data</span><span class="c1">:{}</span></p><p class="c6"><span class="c0">}</span></p><p class="c6 c9"><span></span></p><p class="c6"><span class="c20">DELETE</span><span>: Removes the node from the network</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Response:</span></p><p class="c6"><span class="c0">{</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">true,</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message</span><span class="c1">:&quot;&quot;</span></p><p class="c6"><span class="c0">}</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Name: </span><span class="c20">Neighbours</span></p><p class="c6"><span>Description: </span><span class="c22">It&rsquo;s one specific node in the network</span></p><p class="c6"><span>URI: BASE_URL + &ldquo;{ModelId}/nodes/{NodeId}/nbr&rdquo;</span></p><p class="c6"><span class="c20">GET</span><span>: Returns information of nodes near the {NodeId} node according to the Server</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Response:</span></p><p class="c6"><span class="c0">[</span></p><p class="c6"><span class="c0">&nbsp; {</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;id&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;node1&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;state&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;position&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;positionType&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;Lat/Lon&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;lat&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">44.137199,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;lon&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">12.241922</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c1">},</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;values&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">null,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;sensors&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">null</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c6"><span class="c0">&nbsp; </span><span class="c1">},</span></p><p class="c6"><span class="c0">&nbsp; {</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;id&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;node2&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;state&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;position&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;positionType&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;Lat/Lon&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;lat&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">44.13756,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;lon&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">12.24132</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c1">},</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;values&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">null,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c2 c11">&quot;sensors&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">null</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c6"><span class="c0">&nbsp; }</span></p><p class="c6"><span class="c0">]</span></p><h3 class="c4"><a name="h.twanzmq2t7qb"></a><span>Network Model (of devices)</span></h3><p class="c3"><span>How information about the node is represented and stored into the system memory could highly influence performance of the application, however the set of operation we want to perform onto this database are conceptually fixed and we want to give the server flexibility in a way that it permits in the future to change the way the data is stored without changing the overall system.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 344.00px;"><img alt="" src="images/image00.png" style="width: 624.00px; height: 344.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span>The picture shows how what discussed can be achieved in an easy way by using the pattern bridge tactically combined with a singleton to have better access to the central DataBase class. </span></p><p class="c3 c9"><span></span></p><p class="c3"><span>A better specification of the </span><span class="c22">ISpatialDataBase</span><span>&nbsp;interface:</span></p><p class="c3 c9"><span class="c2 c13"></span></p><p class="c3"><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c13">interface</span><span class="c0">&nbsp;</span><span class="c2 c15">ISpatialDataBase</span><span class="c0">&nbsp;{</span></p><p class="c3 c9"><span class="c0"></span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">/**</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">* </span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;net</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the network name identifier</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;id</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@return</span><span class="c0">&nbsp;</span><span class="c2 c15">The</span><span class="c0">&nbsp;node specified </span><span class="c2 c13">by</span><span class="c0">&nbsp;the id.</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c15">Node</span><span class="c0">&nbsp;getNode</span><span class="c1">(</span><span class="c2 c15">String</span><span class="c0">&nbsp;net</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c15">String</span><span class="c0">&nbsp;id</span><span class="c1">);</span></p><p class="c3 c9"><span class="c0"></span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">/**</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c15">Updates</span><span class="c0">&nbsp;the state of the node.</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">* </span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;net</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the network name identifier</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;id</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c15">Id</span><span class="c0">&nbsp;of the node</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;state</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c15">State</span><span class="c0">&nbsp;of the node</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c13">void</span><span class="c0">&nbsp;updateNodeState</span><span class="c1">(</span><span class="c2 c15">String</span><span class="c0">&nbsp;net</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c15">String</span><span class="c0">&nbsp;id</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c15">NodeState</span><span class="c0">&nbsp;state</span><span class="c1">);</span></p><p class="c3 c9"><span class="c0"></span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">/**</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c15">Returns</span><span class="c0">&nbsp;the list of nodes </span><span class="c2 c13">in</span><span class="c0">&nbsp;the </span><span class="c2 c11">&quot;spatial&quot;</span><span class="c0">&nbsp;area specified </span><span class="c2 c13">by</span><span class="c0">&nbsp;the</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;searchCriteria</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">* </span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;net</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the network name identifier</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;position</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;searchCriteria</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@return</span><span class="c0">&nbsp;list of the nearest node to the point position</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c15">List</span><span class="c1">&lt;</span><span class="c2 c15">Node</span><span class="c1">&gt;</span><span class="c0">&nbsp;getNeighbourhood</span><span class="c1">(</span><span class="c2 c15">String</span><span class="c0">&nbsp;net</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c15">IPosition</span><span class="c0">&nbsp;position,</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">SearchCriteria</span><span class="c0">&nbsp;searchCriteria</span><span class="c1">);</span></p><p class="c3 c9"><span class="c0"></span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">/**</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;net</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the network name identifier</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;id</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@return</span><span class="c0">&nbsp;</span><span class="c2 c13">true</span><span class="c0">&nbsp;</span><span class="c2 c13">if</span><span class="c0">&nbsp;it</span><span class="c2 c11">&#39;s succefully removed</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c13">boolean</span><span class="c0">&nbsp;removeNode</span><span class="c1">(</span><span class="c2 c15">String</span><span class="c0">&nbsp;net</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c15">String</span><span class="c0">&nbsp;id</span><span class="c1">);</span></p><p class="c3 c9"><span class="c0"></span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">/**</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@param</span><span class="c0">&nbsp;net</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the network name identifier</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@return</span><span class="c0">&nbsp;all the nodes </span><span class="c2 c13">in</span><span class="c0">&nbsp;the network</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c15">Collection</span><span class="c1">&lt;</span><span class="c2 c15">Node</span><span class="c1">&gt;</span><span class="c0">&nbsp;getAllNodes</span><span class="c1">(</span><span class="c2 c15">String</span><span class="c0">&nbsp;net</span><span class="c1">);</span></p><p class="c3"><span class="c0">}</span></p><p class="c3 c9"><span class="c2"></span></p><p class="c6"><span>As can be seen, neighbourhood search needs a search criteria to be given as parameter, this means that every implementation of </span><span class="c22">ISpatialDataBase</span><span>&nbsp;should be able to perform different kinds of operation on the model based on the type of search criteria we want to perform.</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Different kind of search criteria could be:</span></p><ul class="c19 lst-kix_bdvaausjkn7q-0 start"><li class="c6 c10"><span>the simple range search from a point with a radius.</span></li><li class="c6 c10"><span>fetching the N nearest point from a position.</span></li></ul><h1 class="c4"><a name="h.l6mc9rg1j1u9"></a><span>Development</span></h1><h3 class="c4"><a name="h.33hqov1tzelb"></a><span>Project Structure</span></h3><p class="c4 subtitle"><a name="h.5nfooxzh8vtg"></a><span class="c34">Implementation of the server is split up between two different projects:</span></p><ul class="c19 lst-kix_s1sx882nqkje-0 start"><li class="c6 c10"><span>it.isac.commons : Containing the model of resources and concept commons between server and clients.</span></li></ul><ul class="c19 lst-kix_s1sx882nqkje-1 start"><li class="c6 c18"><span>it.isac.commons.interfaces</span></li><li class="c6 c18"><span>it.isac.commons.interfaces.resources</span></li><li class="c6 c18"><span>it.isac.commons.model</span></li><li class="c6 c18"><span>it.isac.commons.model.nodevalues</span></li><li class="c6 c18"><span>it.isac.commons.model.sensors</span></li><li class="c6 c18"><span>it.isac.commons.model.requestresponse</span></li></ul><ul class="c19 lst-kix_s1sx882nqkje-0"><li class="c6 c10"><span>it.isac.server : Containing all implementation on the server</span></li></ul><ul class="c19 lst-kix_s1sx882nqkje-1 start"><li class="c6 c18"><span>it.isac.db : This package has classes for managing the persistent state of the system.</span></li><li class="c6 c18"><span>it.isac.db.search : Search Criteria for the neighbourhood</span></li><li class="c6 c18"><span>it.isac.server : This class includes the server executable entry points.</span></li><li class="c6 c18"><span>it.isac.resources : Here are located the ReST resources for the server. </span></li><li class="c6 c18"><span>it.isac.server.testing : Testing client classes</span></li><li class="c6 c18"><span>it.isac.server.utils</span></li><li class="c6 c18"><span>it.isac.server.utils.config</span></li></ul><h3 class="c4"><a name="h.izvyuf59y54x"></a><span>Communication</span></h3><p class="c3"><span>For implementing the communication part of the server we used </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://restlet.com/technical-resources/restlet-framework/guide/2.3&amp;sa=D&amp;usg=AFQjCNFwu7ivnXcx-Dpu5ViEPCXhajs1yg">Restlet Framework</a></span><span>&nbsp;an API that helps building better web application following the ReST architectural style. </span></p><p class="c3"><span>With restlet we can focus on the model of our resources without worrying too much about their representation, since automatic tools will handle the parsing to common structural model languages as xml and json based on the request media-type.</span></p><h4 class="c4 c31"><a name="h.xr8fvsxap8v"></a><span>Restlet Architecture</span></h4><p class="c6 c28"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 221.00px; height: 192.00px;"><img alt="" src="images/image04.png" style="width: 221.00px; height: 192.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span>The image shows that our application is built over the Restlet API, Restlet Engine is that part of the system that encapsulate all the mechanics that permit the application to handle communication between clients and the HTTP server.</span></p><p class="c3"><span>Bullet points of the engine architecture are:</span></p><ul class="c19 lst-kix_9s4b1vf9pkzs-0 start"><li class="c3 c10"><span>Requests are handled in a parallel fashion an</span><span>d with per-request Resource instances to reduce thread-safety issues.</span></li><li class="c3 c10"><span>To provide a better scalability there&rsquo;s no concept of HTTP session contrary to Servlet technology, making it best for our applicative scenario.</span></li></ul><p class="c3 c9"><span></span></p><p class="c3"><span>All that is left to specify to the restlet api is the link between the resource URI and our resource implementation, this is usually done inside a Restlet Application class that provides a way to group RESTful resource classes that share common data and services.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span class="c2 c7">/**</span></p><p class="c3"><span class="c0">&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c15">This</span><span class="c0">&nbsp;</span><span class="c2 c13">is</span><span class="c0">&nbsp;a simple restlet application used </span><span class="c2 c13">for</span><span class="c0">&nbsp;the spatial computing server.</span></p><p class="c3"><span class="c0">&nbsp;</span><span class="c1">*</span><span class="c0">&nbsp;</span><span class="c2 c14">@author</span><span class="c0">&nbsp;</span><span class="c2 c15">Pievis</span></p><p class="c3"><span class="c0">&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c13">class</span><span class="c0">&nbsp;</span><span class="c2 c15">ServerApplication</span><span class="c0">&nbsp;</span><span class="c2 c13">extends</span><span class="c0">&nbsp;</span><span class="c2 c15">Application</span><span class="c0">&nbsp;{</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">final</span><span class="c0">&nbsp;</span><span class="c2 c13">static</span><span class="c0">&nbsp;</span><span class="c2 c15">String</span><span class="c0">&nbsp;BASE_URL </span><span class="c1">=</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;/&quot;;</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">final</span><span class="c0">&nbsp;</span><span class="c2 c13">static</span><span class="c0">&nbsp;</span><span class="c2 c15">Logger</span><span class="c0">&nbsp;LOGGER </span><span class="c1">=</span><span class="c0">&nbsp;</span><span class="c2 c15">Logger</span><span class="c1">.</span><span class="c0">getLogger</span><span class="c1">(</span><span class="c2 c15">ServerApplication</span><span class="c1">.</span><span class="c2 c13">class</span><span class="c1">.</span><span class="c0">getName</span><span class="c1">());</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Override</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c15">Restlet</span><span class="c0">&nbsp;createInboundRoot</span><span class="c1">(){</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">Router</span><span class="c0">&nbsp;router </span><span class="c1">=</span><span class="c0">&nbsp;</span><span class="c2 c13">new</span><span class="c0">&nbsp;</span><span class="c2 c15">Router</span><span class="c1">(</span><span class="c0">getContext</span><span class="c1">());</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">//Node Resource</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;router</span><span class="c1">.</span><span class="c0">attach</span><span class="c1">(</span><span class="c0">BASE_URL</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c15">RootServerResource</span><span class="c1">.</span><span class="c2 c13">class</span><span class="c1">);</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;router</span><span class="c1">.</span><span class="c0">attach</span><span class="c1">(</span><span class="c0">BASE_URL </span><span class="c1">+</span><span class="c0">&nbsp;</span><span class="c2 c15">UrlAttributes</span><span class="c1">.</span><span class="c0">getRelNodeUrl</span><span class="c1">(),</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">NodeServerResource</span><span class="c1">.</span><span class="c2 c13">class</span><span class="c1">);</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;router</span><span class="c1">.</span><span class="c0">attach</span><span class="c1">(</span><span class="c0">BASE_URL </span><span class="c1">+</span><span class="c0">&nbsp;</span><span class="c2 c15">UrlAttributes</span><span class="c1">.</span><span class="c0">getRelNodesUrl</span><span class="c1">(),</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">NodesServerResource</span><span class="c1">.</span><span class="c2 c13">class</span><span class="c1">);</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;router</span><span class="c1">.</span><span class="c0">attach</span><span class="c1">(</span><span class="c0">BASE_URL </span><span class="c1">+</span><span class="c0">&nbsp;</span><span class="c2 c15">UrlAttributes</span><span class="c1">.</span><span class="c0">getRelNodeNbrUrl</span><span class="c1">(),</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">NeighboursServerResource</span><span class="c1">.</span><span class="c2 c13">class</span><span class="c1">);</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">//TODO add other resources if necessary</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">return</span><span class="c0">&nbsp;router</span><span class="c1">; </span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c0">&nbsp;</span><span class="c2 c15">ServerApplication</span><span class="c1">(){</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setName</span><span class="c1">(</span><span class="c2 c11">&quot;Spatial Computing Mediator&quot;</span><span class="c1">);</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setAuthor</span><span class="c1">(</span><span class="c2 c11">&quot;Pierluigi Montagna&quot;</span><span class="c1">);</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;configure</span><span class="c1">();</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">void</span><span class="c0">&nbsp;configure</span><span class="c1">(){</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">//Load Server configuration from file</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">//Which now include db server configuration</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">ServerConfig</span><span class="c1">.</span><span class="c0">loadFromConfigFile</span><span class="c1">();</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c3"><span class="c0">}</span></p><p class="c3 c9"><span></span></p><p class="c3"><span>Restlet framework uses the Component class to actually deploy the application on the machine, the purpose of components is to deploy those applications and adapt them to specific target environments, so that the applicative core of the server remain unchanged in regard of different technologies.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span>In our project </span><span class="c22">SpatialServerComponent </span><span>class is the entry point for the application, since it deploys </span><span class="c22">ServerApplication</span><span>&nbsp;and creates an http server.</span></p><h3 class="c4"><a name="h.cz58oepvg240"></a><span>Resources</span></h3><p class="c3"><span>We already identified &nbsp;the structure of our resources, following interfaces use Restlet annotations to specify how the framework should behave based on the http method of the request for that resource.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c13">interface</span><span class="c2">&nbsp;</span><span class="c2 c15">INetworkResource</span><span class="c2">&nbsp;{</span></p><p class="c3 c9"><span class="c2"></span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Get</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c15">Representation</span><span class="c2">&nbsp;represent</span><span class="c1">();</span></p><p class="c3"><span class="c2">}</span></p><p class="c3 c9"><span class="c2"></span></p><p class="c3"><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c13">interface</span><span class="c2">&nbsp;</span><span class="c2 c15">INodesResource</span><span class="c2">&nbsp;{</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Get</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c15">NodeList</span><span class="c2">&nbsp;represent</span><span class="c1">();</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Post</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">/**</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c2">&nbsp;</span><span class="c2 c15">Post</span><span class="c2">&nbsp;request to add a </span><span class="c2 c13">new</span><span class="c2">&nbsp;node </span><span class="c2 c13">into</span><span class="c2">&nbsp;the network.</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c2">&nbsp;</span><span class="c2 c14">@param</span><span class="c2">&nbsp;nodeState</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c2">&nbsp;</span><span class="c2 c14">@return</span><span class="c2">&nbsp;a </span><span class="c2 c15">SimpleResponse</span><span class="c2">&nbsp;</span><span class="c2 c13">with</span><span class="c2">&nbsp;the unique id </span><span class="c2 c13">for</span><span class="c2">&nbsp;that node.</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c15">SimpleResponse</span><span class="c2">&nbsp;addNode</span><span class="c1">(</span><span class="c2 c15">NodeState</span><span class="c2">&nbsp;nodeState</span><span class="c1">);</span></p><p class="c3"><span class="c2">}</span></p><p class="c3 c9"><span class="c2"></span></p><p class="c3"><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c13">interface</span><span class="c2">&nbsp;</span><span class="c2 c15">INodeResource</span><span class="c2">&nbsp;{</span></p><p class="c3 c9"><span class="c2"></span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Get</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c15">Node</span><span class="c2">&nbsp;represent</span><span class="c1">();</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Put</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c7">/**</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c2">&nbsp;</span><span class="c2 c15">Updates</span><span class="c2">&nbsp;the state of the node based on its id.</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c2">&nbsp;</span><span class="c2 c15">If</span><span class="c2">&nbsp;</span><span class="c2 c13">no</span><span class="c2">&nbsp;node of specified id </span><span class="c2 c13">is</span><span class="c2">&nbsp;found</span><span class="c1">,</span><span class="c2">&nbsp;the node </span><span class="c2 c13">is</span><span class="c2">&nbsp;added to the network anyway.</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c2">&nbsp;</span><span class="c2 c14">@param</span><span class="c2">&nbsp;node</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*</span><span class="c2">&nbsp;</span><span class="c2 c14">@return</span><span class="c2">&nbsp;a </span><span class="c2 c15">SimpleResponse.</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">*/</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c15">SimpleResponse</span><span class="c2">&nbsp;update</span><span class="c1">(</span><span class="c2 c15">Node</span><span class="c2">&nbsp;node</span><span class="c1">);</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Delete</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c15">Representation</span><span class="c2">&nbsp;</span><span class="c2 c13">delete</span><span class="c1">();</span></p><p class="c3"><span class="c2">}</span></p><p class="c3 c9"><span class="c2"></span></p><p class="c3"><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c13">interface</span><span class="c2">&nbsp;</span><span class="c2 c15">INeighboursResource</span><span class="c2">&nbsp;{</span></p><p class="c3 c9"><span class="c2"></span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c14">@Get</span></p><p class="c3"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c13">public</span><span class="c2">&nbsp;</span><span class="c2 c15">NodeList</span><span class="c2">&nbsp;represent</span><span class="c1">();</span></p><p class="c3"><span class="c2">}</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Resource implementation follows the instruction given by the interfaces are provided in the package </span><span class="c22">it.isac.resources</span><span>.</span></p><h3 class="c4"><a name="h.ftqawo517cna"></a><span>Network Model (of devices)</span></h3><p class="c3"><span>We implemented two basic class after the </span><span class="c22">ISpatialDataBase</span><span>&nbsp;specification, one that uses simple java collections to store data and one that uses </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/&amp;sa=D&amp;usg=AFQjCNH30fStHVj7ZGWFJK1whJ8OUkyAqw">Redis</a></span><span>. We aren&rsquo;t really interested to the </span><span class="c22">MemoryDB</span><span>&nbsp;class since its purpose is to give the basic functionality for storing objects into memory for testing the server without any other data storage systems. We are instead going to discuss deeply the redis one.</span></p><h4 class="c4 c31"><a name="h.1rszjmtf8jea"></a><span>Redis Introduction</span></h4><p class="c3"><span>Redis is an open-source, in-memory data structure storage that is build to work with large quantity of data. It&rsquo;s simple to use and with a well-made documentation, regardless it offers the following features that makes it perfect of our applicative scenario:</span></p><ul class="c19 lst-kix_7af67qqo4dei-0 start"><li class="c3 c10"><span>It supports data structures such as </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/topics/data-types-intro%23strings&amp;sa=D&amp;usg=AFQjCNG1zldjlLq_oH0IdPCn37X68A8v9g">strings</a></span><span>, </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/topics/data-types-intro%23hashes&amp;sa=D&amp;usg=AFQjCNHDTDL1Wh4tp5NnBIYoR5kfwzFVIw">hashes</a></span><span>, </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/topics/data-types-intro%23lists&amp;sa=D&amp;usg=AFQjCNFZIs2NEzQfaeh2q2kz6YPs5Kh8jQ">lists</a></span><span>, </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/topics/data-types-intro%23sets&amp;sa=D&amp;usg=AFQjCNHMjou6-1kDgg-GOZTPw7duxIT8OA">sets</a></span><span>, </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/topics/data-types-intro%23sorted-sets&amp;sa=D&amp;usg=AFQjCNHxU7lALEDynDE0km05MSvLcR84yg">sorted sets</a></span><span>&nbsp;with range queries, </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/topics/data-types-intro%23bitmaps&amp;sa=D&amp;usg=AFQjCNHlDLlf-Nr14EII8w6nDZx1e_yiig">bitmaps</a></span><span>,</span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/topics/data-types-intro%23hyperloglogs&amp;sa=D&amp;usg=AFQjCNH5rKQWuniAy5TNhNMNyUnjanIxuA">hyperloglogs</a></span><span>&nbsp;and </span><span class="c23 c20"><a class="c16" href="https://www.google.com/url?q=http://redis.io/commands/geoadd&amp;sa=D&amp;usg=AFQjCNHAkUaXuoeoYTLiKdxPuQhNEa9ryA">geospatial indexes</a></span><span class="c20">&nbsp;with radius queries</span><span class="c32">.</span></li><li class="c6 c10"><span>You can run </span><span class="c20">atomic operations</span><span>&nbsp;on these types.</span></li><li class="c6 c10"><span>It supports </span><span class="c20">expiration of data</span><span>&nbsp;structure after a give time.</span></li></ul><p class="c6 c9"><span></span></p><p class="c6"><span>Redis has it&rsquo;s own set of action that can be performed on data structures, the full set of </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/commands&amp;sa=D&amp;usg=AFQjCNGor5kCw8dnlcqGPZMLHzb1Gjrf1g">commands</a></span><span>&nbsp;includes:</span></p><ul class="c19 lst-kix_8i3sfdutmf0u-0 start"><li class="c6 c10"><span>SET and GET to store and fetch information using a key string.</span></li><li class="c6 c10"><span>SADD and ZADD to add items to a set or sorted set.</span></li><li class="c6 c10"><span>SREM and ZREM to remove an item from a set or sorted set.</span></li><li class="c6 c10"><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/commands/geoadd&amp;sa=D&amp;usg=AFQjCNHAkUaXuoeoYTLiKdxPuQhNEa9ryA">GEOADD</a></span><span>&nbsp;to add an item with longitude and latitude to a geo index.</span></li><li class="c6 c10"><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/commands/georadius&amp;sa=D&amp;usg=AFQjCNGoGWtznr35N9hyxkS7u_3sMfzf0w">GEORADIUS</a></span><span>&nbsp;to get items from a geo index inside a radius of given meters from a point.</span></li></ul><h4 class="c4"><a name="h.3dqi3un7ij5l"></a><span>Redis Implementation</span></h4><p class="c3"><span>Information of one node should be indexed by the network id of our model and the node id itself, this means that we can use these two types of data structure for storing our model:</span></p><ul class="c19 lst-kix_7w7aear9n6i1-0 start"><li class="c3 c10"><span>a simple string indexed with a combination of the netId and nodeId for saving all information about a note state (using for example json formalism).</span></li></ul><ul class="c19 lst-kix_7w7aear9n6i1-1 start"><li class="c3 c18"><span>that can be made expirable after a given amount of seconds.</span></li></ul><ul class="c19 lst-kix_7w7aear9n6i1-0"><li class="c3 c10"><span>a geospatial index (geolist) indexed by the netId containing all nodes at a given latitude and longitude. </span></li></ul><ul class="c19 lst-kix_7w7aear9n6i1-1 start"><li class="c3 c18"><span>that can be used for neighbourhood search.</span></li></ul><p class="c3 c9"><span></span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 420.00px;"><img alt="" src="images/image01.png" style="width: 624.00px; height: 420.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c9"><span></span></p><p class="c3"><span>The reason we don&rsquo;t simply use the geospatial index is that redis can&rsquo;t mark as expirable elements of the geospatial index as well for elements of sets and lists. This means that consistency between the geolist and active nodes in a network should be given by the application, this could be done every time we fetch nodes from a network in four simple steps:</span></p><p class="c3 c9"><span></span></p><ol class="c19 lst-kix_cmzrwo50c304-0 start" start="1"><li class="c3 c10"><span>Get the list of node ids from the geolist</span></li><li class="c3 c10"><span>For every id in the list fetch the respective string representation from the db</span></li></ol><ol class="c19 lst-kix_cmzrwo50c304-1 start" start="1"><li class="c3 c18"><span>if the string is null mark the node id for deletion.</span></li><li class="c3 c18"><span>otherwise parse the string and save the node into a list.</span></li></ol><ol class="c19 lst-kix_cmzrwo50c304-0" start="3"><li class="c3 c10"><span>Remove all marked node ids from the geolist in a single redis call.</span></li><li class="c3 c10"><span>Return the list of parsed nodes.</span></li></ol><p class="c3 c9"><span></span></p><p class="c3"><span>Of course because interleaving of these operation can occur, case in which a node is removed from the geospatial index even if it was just added to the network exists. However we consider the price of using synchronism too high to pay since in our scenario we have to deal with devices that continuously update their state and losing track of a device for a given time is expected.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span>Redis database implementation can be found in the class </span><span class="c22">RedisDB</span><span>&nbsp;of package </span><span class="c22">it.isac.db</span><span>, and supports both range search and finding the k nearest nodes from a point. For communicating with redis </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.paluch.biz/&amp;sa=D&amp;usg=AFQjCNHXvihz3rVcxwh6hqAT3-540xth1Q">lettuce</a></span><span>&nbsp;was used as a client api, no authentication mechanism was implemented, all needed informations are redis machine ip number and port location. </span></p><h3 class="c4"><a name="h.juwblbg6zv8r"></a><span>Logging and configuration</span></h3><p class="c3"><span>It&rsquo;s worth noticing that simple means for configuration and logging are implemented for a better management of the system.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span>All logging is done using java.utils.logging and its specification are located in the file </span><span class="c22">logging.properties</span><span>&nbsp;located in the project folder.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span>A configuration file holds all the parameters of the server, specifying which implementation of </span><span class="c22">ISpatialDataBase</span><span>&nbsp;class to use and which </span><span class="c22">SearchCriteria</span><span>&nbsp;to apply during the neighbourhood search. Next we see an example of a configuration file that uses redis as database and a range search as search criteria.</span></p><p class="c3 c9"><span></span></p><p class="c3"><span class="c0">{</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c2 c11">&quot;name&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;Spatial Computing Server&quot;,</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c2 c11">&quot;description&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;Redis configuration.&quot;,</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c2 c11">&quot;versionName&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;1.1v&quot;,</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c2 c11">&quot;loggerFilesDir&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;./logs/&quot;,</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c2 c11">&quot;portNumber&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">8111,</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c2 c11">&quot;searchCriteria&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;@class&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;it.isac.db.search.RangeSearch&quot;,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;unit&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;M&quot;,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;range&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">100.0</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c1">},</span></p><p class="c3"><span class="c0">&nbsp; </span><span class="c2 c11">&quot;dbConfig&quot;</span><span class="c1">:</span><span class="c0">&nbsp;{</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;@class&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;it.isac.server.utils.config.DBRedisConfig&quot;,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;url&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;redis://192.168.56.101&quot;,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;port&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c11">&quot;6379&quot;,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;useExpiration&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c13">true,</span></p><p class="c3"><span class="c0">&nbsp; &nbsp; </span><span class="c2 c11">&quot;expirationSeconds&quot;</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">60</span></p><p class="c3"><span class="c0">&nbsp; }</span></p><p class="c3"><span class="c0">}</span></p><p class="c3 c9"><span></span></p><p class="c3"><span>Configuration of the server can be done during the launch of the application passing the location of the configuration file as the first parameter, regardless a standard </span><span class="c22">config.ini</span><span>&nbsp;is used.</span></p><h3 class="c4"><a name="h.nrojtzp0onnv"></a><span>Repository</span></h3><p class="c6"><span class="c23"><a class="c16" href="https://www.google.com/url?q=https://bitbucket.org/mbezzi/isacproject/src&amp;sa=D&amp;usg=AFQjCNFauNDHbJmbH4JnLS-MFgXhmOdWMg">https://bitbucket.org/mbezzi/isacproject/src</a></span></p><h2 class="c4"><a name="h.ougvhtq5jx7e"></a><span>Deployment</span></h2><p class="c6"><span>Since Restlet doesn&rsquo;t need any other runtime environment, the deployment of the system is just plain easy. For running the spatial computing server just execute server.jar passing a configuration file as first parameter.</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>If redis is used, it needs to be configurated and running on the system, information about redis deployment can be found on redis.io </span><span class="c23"><a class="c16" href="https://www.google.com/url?q=http://redis.io/download&amp;sa=D&amp;usg=AFQjCNGGXCv2R3uBJZx8LxeJG2Hfp_ZzhA">webpage</a></span><span>.</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>Currently the system was built using restlet version 2.4.4 and redis 3.2 (unstable).</span></p><h2 class="c4"><a name="h.jz0j4t5vipv2"></a><span>Redis Error Measurement</span></h2><p class="c6"><span>Quoting redis.io webpages on distance measurement from two geopoints: </span><span class="c22">&ldquo;The distance is computed assuming that the Earth is a perfect sphere, so errors up to 0.5% are possible in edge cases.&rdquo;</span></p><p class="c6"><span>We want to test some cases to assert the quality of the measurement for our applicative scenario.</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>We take some distinctive points in Cesena (Italy):</span></p><p class="c6 c9"><span></span></p><p class="c6"><span class="c2 c7">// Piazza del popolo 44.137199, 12.241922</span></p><p class="c6"><span class="c2 c15">LatLonPosition</span><span class="c0">&nbsp;piazza </span><span class="c1">=</span><span class="c0">&nbsp;</span><span class="c2 c13">new</span><span class="c0">&nbsp;</span><span class="c2 c15">LatLonPosition</span><span class="c1">(</span><span class="c2 c14">44.137199</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c14">12.241922</span><span class="c1">);</span></p><p class="c6"><span class="c2 c15">String</span><span class="c0">&nbsp;idPiazza </span><span class="c1">=</span><span class="c0">&nbsp;addNewNode</span><span class="c1">(</span><span class="c2 c14">44.137199</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c14">12.241922</span><span class="c1">);</span></p><p class="c6"><span class="c2 c7">// Piazza (pappa reale) 44.137560, 12.241320</span></p><p class="c6"><span class="c0">addNewNode</span><span class="c1">(</span><span class="c2 c14">44.137560</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c14">12.241320</span><span class="c1">);</span></p><p class="c6"><span class="c2 c7">// Rocca 44.135996, 12.240365.</span></p><p class="c6"><span class="c0">addNewNode</span><span class="c1">(</span><span class="c2 c14">44.135996</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c14">12.240365</span><span class="c1">);</span></p><p class="c6"><span class="c2 c7">// via chiaramonti (biblioteca) 44.140027, 12.242564</span></p><p class="c6"><span class="c0">addNewNode</span><span class="c1">(</span><span class="c2 c14">44.140027</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c14">12.242564</span><span class="c1">);</span></p><p class="c6"><span class="c2 c7">// via sacchi 3 (facolt&agrave;) 44.139623, 12.243427</span></p><p class="c6"><span class="c0">addNewNode</span><span class="c1">(</span><span class="c2 c14">44.139623</span><span class="c1">,</span><span class="c0">&nbsp;</span><span class="c2 c14">12.243427</span><span class="c1">);</span></p><p class="c6 c9"><span></span></p><p class="c6"><span>And we check near places in a range of 100m from Piazza del popolo using the provided range search of redis implemented in the system.</span></p><p class="c6 c9"><span></span></p><p class="c6"><span class="c0">NBR</span><span class="c1">:[</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">idPappaReale</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">[</span><span class="c0">pos</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c1">[</span><span class="c0">lat</span><span class="c1">:</span><span class="c2 c14">44.13756</span><span class="c1">,</span><span class="c0">lon</span><span class="c1">:</span><span class="c2 c14">12.24132</span><span class="c1">],</span><span class="c0">&nbsp;values</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c1">{},</span><span class="c0">&nbsp;sensors</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c1">{}]</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">Distance</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">62.60068090367517</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">idPiazza</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">[</span><span class="c0">pos</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c1">[</span><span class="c0">lat</span><span class="c1">:</span><span class="c2 c14">44.137199</span><span class="c1">,</span><span class="c0">lon</span><span class="c1">:</span><span class="c2 c14">12.241922</span><span class="c1">],</span><span class="c0">&nbsp;values</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c1">{},</span><span class="c0">&nbsp;sensors</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c1">{}]</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2 c15">Distance</span><span class="c1">:</span><span class="c0">&nbsp;</span><span class="c2 c14">0.0</span></p><p class="c6"><span class="c0">]</span></p><p class="c6 c9"><span></span></p><p class="c3"><span>As expected the system shows two nodes, one being the center of the range search. More tests confirms that the georadius function of redis returns the expected values, but since we want to study the quality of these results we check possible error in measuring the distance from two points because that could result in obtaining more or less points from georadius.</span></p><p class="c6 c9"><span></span></p><p class="c3"><span>Using Google Maps to obtain the &ldquo;real&rdquo; distance between two points, we test and see error given by redis.</span></p><p class="c6 c9"><span></span></p><a href="#" name="c43e280a5cf7073706201e8ce87f318652766949"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c25"><tbody><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">Real distance</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">Redis distance</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">Error</span></p></td></tr><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c24">62.45 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c6 c30"><span class="c17">62.60 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">0,15 m</span></p></td></tr><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c24">183.67 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">185.13 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">1,46</span></p></td></tr><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c24">315.23 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">318.52 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">3,29</span></p></td></tr><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c24">295.96 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">274.38 m</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">21,58</span></p></td></tr><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c24 c29">1.07 km</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">1.07 km</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">&lt; 0.01 km</span></p></td></tr><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c24">669.89 km </span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">670.07 km</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">0,18 km</span></p></td></tr><tr class="c5"><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c24">642.52 km</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">642.71 km</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c8"><span class="c17">0,19 km</span></p></td></tr></tbody></table><p class="c6 c9"><span></span></p><p class="c3"><span>Data shows that redis measurement have an error in meters that increases based on the range used for the range search. However since in our scenario we are interested in short distance range search between 5m and 200m at least, the error provided by the application is marginal.</span></p><h2 class="c4"><a name="h.ls3wx4bbsyox"></a><span>Visualizer</span></h2><p class="c6"><span>As an additional feature, requesting the NetworkResource with the browser you&rsquo;ll be given the representation of the network using google map api. This viewer is actually a web application that continuously queries the state of the network and updates its view.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 484.00px;"><img alt="" src="images/image03.png" style="width: 624.00px; height: 484.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></body></html>